{% extends 'base.html' %}
{% block title %}Summary{% endblock %}

{% block content %}
<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <!-- Total Income -->
    <div class="bg-green-100 shadow-lg rounded-2xl p-6 text-center">
        <h3 class="text-lg font-bold text-green-700">Total Income</h3>
        <p class="text-3xl font-extrabold text-green-900">${{ total_income }}</p>
    </div>

    <!-- Total Expenses -->
    <div class="bg-red-100 shadow-lg rounded-2xl p-6 text-center">
        <h3 class="text-lg font-bold text-red-700">Total Expenses</h3>
        <p class="text-3xl font-extrabold text-red-900">${{ total_expenses }}</p>
    </div>

    <!-- Net Balance -->
    <div class="bg-indigo-100 shadow-lg rounded-2xl p-6 text-center">
        <h3 class="text-lg font-bold text-indigo-700">Net Balance</h3>
        <p class="text-3xl font-extrabold text-indigo-900">
            {% if balance >= 0 %}+{% endif %}${{ balance }}
        </p>
    </div>
</div>

<!-- Chart Section -->
<div class="bg-white mt-8 rounded-2xl shadow-md p-6">
    <h3 class="text-xl font-bold text-gray-800 mb-4">Expenses by Category</h3>
    <canvas id="categoryChart" class="w-full h-64"></canvas>
</div>

{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const ctx = document.getElementById('categoryChart').getContext('2d');
const categoryChart = new Chart(ctx, {
    type: 'pie',
    data: {
        labels: {{ categories_json|safe }},
        datasets: [{
            label: 'Expenses by Category',
            data: {{ amounts_json|safe }},
            backgroundColor: [
                '#4F46E5','#F59E0B','#10B981','#EF4444','#3B82F6','#8B5CF6'
            ],
            borderWidth: 1
            
        }]
    },
});
</script>
{% endblock %}
